CAPI=2:

name: vfbdb:vhdl:id_and_timestamp

filesets:
  tb_cosim:
    files:
      - tb.vhd
    file_type: vhdlSource-2008
    depend:
      - vhdl::cosim

  vfbdb_dep:
    depend:
      - fbdl::vfbdb

targets:
  tb_cosim_python:
    default_tool: ghdl
    toplevel: tb_cosim
    generate:
      - python
    filesets:
      - vfbdb_dep
      - tb_cosim
    hooks:
      pre_run: [tb_cosim_python]
    parameters:
      - G_SW_GW_FIFO_PATH=/tmp/go-vfbdb/status/id_and_timestamp/python_vhdl
      - G_GW_SW_FIFO_PATH=/tmp/go-vfbdb/status/id_and_timestamp/vhdl_python
  tb_cosim_c-sync:
    default_tool: ghdl
    toplevel: tb_cosim
    generate:
      - c-sync
    filesets:
      - vfbdb_dep
      - tb_cosim
    hooks:
      pre_run: [tb_cosim_c-sync]
    parameters:
      - G_SW_GW_FIFO_PATH=/tmp/go-vfbdb/status/id_and_timestamp/c-sync_vhdl
      - G_GW_SW_FIFO_PATH=/tmp/go-vfbdb/status/id_and_timestamp/vhdl_c-sync

generate:
  python:
    generator: vfbdb
    parameters:
      python: [-path, ../../../../../build/vfbdb/status/id_and_timestamp/python/vhdl]
      vhdl: []
      main: ../bus.fbd
  c-sync:
    generator: vfbdb
    parameters:
      c-sync: [-path, ../../../../../build/vfbdb/status/id_and_timestamp/c-sync/vhdl/vfbdb]
      vhdl: []
      main: ../bus.fbd

parameters:
  G_SW_GW_FIFO_PATH:
    datatype: str
    paramtype: generic
  G_GW_SW_FIFO_PATH:
    datatype: str
    paramtype: generic

scripts:
  tb_cosim_python:
    cmd:
      - ../../../tests/co-simulations/common/python/tb_cosim.sh
      - status
      - id_and_timestamp
      - vhdl
  tb_cosim_c-sync:
    cmd:
      - ../../../tests/co-simulations/common/c-sync/tb_cosim.sh
      - status
      - id_and_timestamp
      - vhdl
